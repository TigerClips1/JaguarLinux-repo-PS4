#Mantainer TigerClips1 <TigerClips1@ps4repo.site>
pkgname=readline
pkgver=8.2
pkgrel=1
pkgdesc="The Readline package is a set of libraries that offer command-line editing and history capabilities."
arch=("x86_64")
url="https://www.linuxfromscratch.org/lfs/downloads/stable-systemd/LFS-BOOK-12.1-systemd-NOCHUNKS.html#ch-system-man-pages"
license=("GPL")

source=("https://ftp.osuosl.org/pub/lfs/lfs-packages/12.1/readline-8.2.tar.gz"
        "https://ftp.osuosl.org/pub/lfs/lfs-packages/12.1/readline-8.2-upstream_fixes-3.patch")

sha256sums=("SKIP"
            "SKIP")


prepare() {
    sed -i '/MV.*old/d' Makefile.in
    sed -i '/{OLDSUFF}/c:' support/shlib-install
    patch -Np1 -i ../readline-8.2-upstream_fixes-3.patch
    ./configure --prefix=/usr    \
            --disable-static \
            --with-curses    \
            --docdir=/usr/share/doc/readline-8.2
}

build() {
   make SHLIB_LIBS="-lncursesw"
}



package() {
   cd $pkgname-$pkgver
   make DESTDIR=$pkgdir SHLIB_LIBS="-lncursesw" install
   install -v -m644 doc/*.{ps,pdf,html,dvi} $pkgdir/usr/share/doc/readline-8.2
}