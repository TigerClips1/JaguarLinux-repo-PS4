#Mantainer TigerClips1 <TigerClips1@ps4repo.site>
pkgname=bzip2
pkgver=1.0.8
pkgrel=1
pkgdesc="The Zlib package contains compression and decompression routines used by some programs."
arch=("x86_64")
url="The Bzip2 package contains programs for compressing and decompressing files. Compressing text files with bzip2 yields a much better compression percentage than with the traditional gzip."
license=("GPL")

source=("https://ftp.osuosl.org/pub/lfs/lfs-packages/12.1/bzip2-1.0.8.tar.gz"
        "https://ftp.osuosl.org/pub/lfs/lfs-packages/12.1/bzip2-1.0.8-install_docs-1.patch")

sha256sums=("SKIP"
            "SKIP"
           )

prepare() {
    cd $pkgname-$pkgver
    patch -Np1 -i ../bzip2-1.0.8-install_docs-1.patch
    sed -i 's@\(ln -s -f \)$(PREFIX)/bin/@\1@' Makefile
    sed -i "s@(PREFIX)/man@(PREFIX)/share/man@g" Makefile
    make -f Makefile-libbz2_so
    make clean
}

build() {
    make
}



package() {
   cd $pkgname-$pkgver
   make PREFIX=$pkgdir/usr install
   cp -av libbz2.so.* $pkgdir/usr/lib
   ln -sv libbz2.so.1.0.8 $pkgdir/usr/lib/libbz2.so
   cp -v bzip2-shared $pkgdir/usr/bin/bzip2
   for i in $pkgdir/usr/bin/{bzcat,bunzip2}; do
        ln -sfv bzip2 $i
    done
    rm -fv $pkgdir/usr/lib/libbz2.a
}
